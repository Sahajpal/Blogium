!function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var e;e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this,e.SanityClient=t()}}(function(){return function t(e,n,r){function o(s,u){if(!n[s]){if(!e[s]){var a="function"==typeof require&&require;if(!u&&a)return a(s,!0);if(i)return i(s,!0);var c=new Error("Cannot find module '"+s+"'");throw c.code="MODULE_NOT_FOUND",c}var f=n[s]={exports:{}};e[s][0].call(f.exports,function(t){var n=e[s][1][t];return o(n?n:t)},f,f.exports,t,e,n,r)}return n[s].exports}for(var i="function"==typeof require&&require,s=0;s<r.length;s++)o(r[s]);return o}({1:[function(t,e,n){"use strict";function r(t){this.client=t}var o=t("xtend/mutable"),i=t("../validators"),s={image:"images",file:"files"};o(r.prototype,{upload:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};i.validateAssetType(t);var r=i.hasDataset(this.client.clientConfig),u="contentType"in n?{"Content-Type":n.contentType}:{},a=s[t];return this.client.requestObservable({method:"POST",headers:o({Accept:"application/json"},u),uri:"/assets/"+a+"/"+r,body:e,json:!1,timeout:0}).map(function(t){return"response"!==t.type?t:o({},t,{body:JSON.parse(t.body)})})}}),e.exports=r},{"../validators":15,"xtend/mutable":26}],2:[function(t,e,n){"use strict";function r(t){this.client=t}var o=t("xtend/mutable");o(r.prototype,{getLoginProviders:function(){return this.client.request({uri:"/auth/providers"})},logout:function(){return this.client.request({uri:"/auth/logout"})}}),e.exports=r},{"xtend/mutable":26}],3:[function(t,e,n){"use strict";var r=t("xtend/mutable"),o=t("./validators"),i=n.defaultConfig={apiHost:"https://api.sanity.io",useProjectHostname:!0};n.initConfig=function(t,e){var n=r({},i,e,t),s=n.useProjectHostname;if("undefined"==typeof Promise)throw new Error("No native `Promise`-implementation found, polyfill needed");if(s&&!n.projectId)throw new Error("Configuration must contain `projectId`");s&&o.projectId(n.projectId),n.dataset&&o.dataset(n.dataset);var u=n.apiHost.split("://",2),a=u[0],c=u[1];return n.useProjectHostname?n.url=a+"://"+n.projectId+"."+c+"/v1":n.url=n.apiHost+"/v1",n}},{"./validators":15,"xtend/mutable":26}],4:[function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var o=t("xtend/mutable"),i=t("../validators"),s=t("./encodeQueryString"),u=t("./transaction"),a=t("./patch"),c=function(t){return o({returnIDs:!0},t.returnDocuments===!1?{}:{returnDocuments:!0})},f=1948;e.exports={fetch:function(t,e){return this.dataRequest("query",{query:t,params:e}).then(function(t){return t.result||[]})},getDocument:function(t){return this.request({uri:"/data/doc/"+t,json:!0}).then(function(t){return t.documents&&t.documents[0]})},create:function(t,e){return this._create(t,"create",e)},createIfNotExists:function(t,e){return this._create(t,"createIfNotExists",e)},createOrReplace:function(t,e){return this._create(t,"createOrReplace",e)},patch:function(t,e){return new a(t,e,this)},delete:function(t){return i.validateDocumentId("delete",t),this.dataRequest("mutate",{mutations:[{delete:{id:t}}]})},mutate:function(t,e){var n=t instanceof a?t.serialize():t,r=Array.isArray(n)?n:[n];return this.dataRequest("mutate",{mutations:r},e)},transaction:function(t){return new u(t,this)},dataRequest:function(t,e){var n=this,o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},u="mutate"===t,a=!u&&s(e),l=!u&&a.length<f,p=l?a:"",d=o.returnFirst;return i.promise.hasDataset(this.clientConfig).then(function(r){return n.request({method:l?"GET":"POST",uri:"/data/"+t+"/"+r+p,json:!0,body:l?void 0:e,query:u&&c(o)})}).then(function(t){if(!u)return t;var e=t.results||[];if(o.returnDocuments)return d?e[0]&&e[0].document:e.map(function(t){return t.document});var n=d?"documentId":"documentIds",i=d?e[0]&&e[0].id:e.map(function(t){return t.id});return r({transactionId:t.transactionID},n,i)})},_create:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},s=i.hasDataset(this.clientConfig),u=r({},e,o({},t,{_id:t._id||s+"/"})),a=o({returnFirst:!0,returnDocuments:!0},n);return this.dataRequest("mutate",{mutations:[u]},a)}}},{"../validators":15,"./encodeQueryString":5,"./patch":6,"./transaction":7,"xtend/mutable":26}],5:[function(t,e,n){"use strict";var r=encodeURIComponent;e.exports=function(t){var e=t.query,n=t.params,o=void 0===n?{}:n;return Object.keys(o).reduce(function(t,e){return t+"&"+r("$"+e)+"="+r(JSON.stringify(o[e]))},"?query="+r(e))}},{}],6:[function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;this.selection=t,this.operations=u({},e),this.client=n}function i(t){if("string"==typeof t||Array.isArray(t))return{id:t};if(t&&t.query)return{query:t.query};var e=["* Dataset-prefixed document ID (<dataset/docId>)","* Array of dataset-prefixed document IDs","* Object containing `query`"].join("\n");throw new Error("Unknown selection for patch - must be one of:\n\n"+e)}var s=t("deep-assign"),u=t("xtend/mutable"),a=t("../validators").validateObject;u(o.prototype,{clone:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new o(this.selection,u({},this.operations,t),this.client)},merge:function(t){return a("merge",t),this.clone({merge:s(this.operations.merge||{},t)})},set:function(t){return this._assign("set",t)},setIfMissing:function(t){return this._assign("setIfMissing",t)},replace:function(t){return a("replace",t),this.clone({replace:t})},inc:function(t){return this._assign("inc",t)},dec:function(t){return this._assign("dec",t)},unset:function(t){throw new Error("Not implemented yet")},append:function(t){throw new Error("Not implemented yet")},prepend:function(t){throw new Error("Not implemented yet")},splice:function(t){throw new Error("Not implemented yet")},serialize:function(){return u(i(this.selection),this.operations)},toJSON:function(){return this.serialize()},commit:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!this.client)throw new Error("No `client` passed to patch, either provide one or pass the patch to a clients `mutate()` method");var e="string"==typeof this.selection,n=u({returnFirst:e,returnDocuments:!0},t);return this.client.mutate({patch:this.serialize()},n)},reset:function(){return new o(this.selection,{},this.client)},_assign:function(t,e){return a(t,e),this.clone(r({},t,u({},this.operations[t]||{},e)))}}),e.exports=o},{"../validators":15,"deep-assign":18,"xtend/mutable":26}],7:[function(t,e,n){"use strict";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments[1];this.operations=t,this.client=e}var i=t("xtend/mutable"),s=t("../validators"),u=t("./patch"),a={returnDocuments:!1};i(o.prototype,{clone:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return new o(this.operations.concat(t),this.client)},create:function(t){return this._create(t,"create")},createIfNotExists:function(t){return this._create(t,"createIfNotExists")},createOrReplace:function(t){return this._create(t,"createOrReplace")},delete:function(t){return s.validateDocumentId("delete",t),this._add({delete:{id:t}})},patch:function t(e,n){var r="function"==typeof n,o=e instanceof u;if(o)return this._add({patch:e.serialize()});if(r){var t=n(new u(e,{},this.client));if(!(t instanceof u))throw new Error("function passed to `patch()` must return the patch");return this._add({patch:t.serialize()})}return this._add({patch:i({id:e},n)})},serialize:function(){return this.operations.slice()},toJSON:function(){return this.serialize()},commit:function(t){if(!this.client)throw new Error("No `client` passed to transaction, either provide one or pass the transaction to a clients `mutate()` method");return this.client.mutate(this.serialize(),t||a)},reset:function(){return this.operations=[],this},_create:function(t,e){if(!t._id&&!this.client)throw new Error('Document needs an _id property when transaction is create outside a client scope. Pass `{_id: "<datasetName>:"}` to have Sanity generate an ID for you.');s.validateObject(e,t);var n=s.hasDataset(this.client.clientConfig),o=r({},e,i({},t,{_id:t._id||n+"/"}));return this._add(o)},_add:function(t){return this.clone(t)}}),e.exports=o},{"../validators":15,"./patch":6,"xtend/mutable":26}],8:[function(t,e,n){"use strict";function r(t){this.request=t.request.bind(t)}var o=t("xtend/mutable"),i=t("../validators");o(r.prototype,{create:function(t){return this._modify("PUT",t)},delete:function(t){return this._modify("DELETE",t)},list:function(){return this.request({uri:"/datasets"})},_modify:function(t,e){return i.dataset(e),this.request({method:t,uri:"/datasets/"+e})}}),e.exports=r},{"../validators":15,"xtend/mutable":26}],9:[function(t,e,n){"use strict";function r(t){var e=function(e,n){return e.concat(o(n)+"="+o(t[n]))};return Object.keys(t).reduce(e,[]).join("&")}var o=function(t){return encodeURIComponent(t)};n.stringify=r},{}],10:[function(t,e,n){"use strict";function r(t){return"Server responded with HTTP "+t.statusCode+" "+(t.statusMessage||"")+", no description"}function o(t,e){var n=(e.headers["content-type"]||"").toLowerCase(),r=n.indexOf("application/json")!==-1;return r?JSON.stringify(t,null,2):t}var i=t("@sanity/request"),s=t("./queryString"),u=t("zen-observable"),a="".indexOf("sanity")!==-1,c=function(){};e.exports=function(t){t.query&&(t.uri+="?"+s.stringify(t.query)),a&&(c("HTTP %s %s",t.method||"GET",t.uri),"POST"===t.method&&t.body&&c("Request body: %s",JSON.stringify(t.body,null,2)));var e=new u(function(e){function n(t){return function(n){var r=n.lengthComputable?n.loaded/n.total:-1;e.next({type:"progress",stage:t,percent:r})}}var s=i(t,function(t,n,i){if(t)return void e.error(t);c("Response code: %s",n.statusCode),a&&i&&c("Response body: %s",o(i,n));var s=n.statusCode>=400;if(s&&i){var u=(i.errors?i.errors.map(function(t){return t.message}):[]).concat([i.error,i.message]).filter(Boolean).join("\n"),f=new Error(u||r(n));return f.responseBody=o(i,n),f.statusCode=n.statusCode,void e.error(f)}if(s){var l=new Error(r(n));return l.statusCode=n.statusCode,void e.error(l)}e.next({type:"response",body:i}),e.complete()});return"upload"in s&&"onprogress"in s.upload&&(s.upload.onprogress=n("upload")),"onprogress"in s&&(s.onprogress=n("download")),s.onabort=function(){e.next({type:"abort"}),e.complete()},function(){return s.abort()}});return e.toPromise=function(){var t=void 0;return e.forEach(function(e){t=e}).then(function(){return t.body})},e}},{"./queryString":9,"@sanity/request":17,"zen-observable":27}],11:[function(t,e,n){"use strict";var r="Sanity-Token",o="Sanity-Project-ID";e.exports=function(t){var e={};return t.token&&(e[r]=t.token),!t.useProjectHostname&&t.projectId&&(e[o]=t.projectId),{headers:e,timeout:"timeout"in t?t.timeout:15e3,withCredentials:!0,json:!0}}},{}],12:[function(t,e,n){"use strict";function r(t){this.client=t}var o=t("xtend/mutable");o(r.prototype,{list:function(){return this.client.request({uri:"/projects"})},getById:function(t){return this.client.request({uri:"/projects/"+t})}}),e.exports=r},{"xtend/mutable":26}],13:[function(t,e,n){"use strict";function r(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m;this.config(t),this.assets=new p(this),this.datasets=new f(this),this.projects=new l(this),this.users=new d(this),this.auth=new h(this)}function o(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];var r=e.reduce(function(t,e){return t||e.headers?s(t||{},e.headers||{}):null},null);return s.apply(void 0,e.concat([r?{headers:r}:{}]))}function i(t){return new r(t)}var s=t("xtend/mutable"),u=t("./data/patch"),a=t("./data/transaction"),c=t("./data/dataMethods"),f=t("./datasets/datasetsClient"),l=t("./projects/projectsClient"),p=t("./assets/assetsClient"),d=t("./users/usersClient"),h=t("./auth/authClient"),y=t("./http/request"),v=t("./http/requestOptions"),b=t("./config"),m=b.defaultConfig,w=b.initConfig;s(r.prototype,c),s(r.prototype,{config:function(t){return"undefined"==typeof t?this.clientConfig:(this.clientConfig=w(t,this.clientConfig||{}),this)},getUrl:function(t){return this.clientConfig.url+"/"+t.replace(/^\//,"")},request:function(t){return this.requestObservable(t).toPromise()},clone:function(t){var e=s(this.config(),t||{});return new r(e)},requestObservable:function(t){return y(o(v(this.clientConfig),t,{uri:this.getUrl(t.uri)}))}}),i.Patch=u,i.Transaction=a,e.exports=i},{"./assets/assetsClient":1,"./auth/authClient":2,"./config":3,"./data/dataMethods":4,"./data/patch":6,"./data/transaction":7,"./datasets/datasetsClient":8,"./http/request":10,"./http/requestOptions":11,"./projects/projectsClient":12,"./users/usersClient":14,"xtend/mutable":26}],14:[function(t,e,n){"use strict";function r(t){this.client=t}var o=t("xtend/mutable");o(r.prototype,{getById:function(t){return this.client.request({uri:"/users/"+t})}}),e.exports=r},{"xtend/mutable":26}],15:[function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=["image","file"];n.dataset=function(t){if(!/^[-\w]{1,128}$/.test(t))throw new Error("Datasets can only contain lowercase characters, numbers, underscores and dashes")},n.projectId=function(t){if(!/^[-a-z0-9]+$/i.test(t))throw new Error("`projectId` can only contain only a-z, 0-9 and dashes")},n.validateAssetType=function(t){if(o.indexOf(t)===-1)throw new Error("Invalid asset type: "+t+". Must be one of "+o.join(", "))},n.validateObject=function(t,e){if(null===e||"object"!==("undefined"==typeof e?"undefined":r(e))||Array.isArray(e))throw new Error(t+"() takes an object of properties")},n.validateDocumentId=function(t,e){if("string"!=typeof e||!/^[-_a-z0-9]{1,128}\/[-_a-z0-9\/]+$/i.test(e))throw new Error(t+"() takes a document ID in format dataset/docId")},n.hasDataset=function(t){if(!t.dataset)throw new Error("`dataset` must be provided to perform queries");return t.dataset},n.promise={hasDataset:function(t){return new Promise(function(e){return e(n.hasDataset(t))})}}},{}],16:[function(t,e,n){"use strict";function r(t,e){for(var n=0;n<t.length;n++)e(t[n])}function o(t){for(var e in t)if(t.hasOwnProperty(e))return!1;return!0}function i(t,e,n){var r=t;return l(e)?(n=e,"string"==typeof t&&(r={uri:t})):r=d(e,{uri:t}),r.callback=n,r}function s(t,e,n){return e=i(t,e,n),u(e)}function u(t){function e(){4===l.readyState&&i()}function n(){var t=void 0;if(t=l.response?l.response:l.responseText||a(l),x)try{t=JSON.parse(t)}catch(t){}return t}function r(t){return clearTimeout(y),t instanceof Error||(t=new Error(""+(t||"Unknown XMLHttpRequest Error"))),t.statusCode=0,c(t,f)}function i(){if(!h){var e;clearTimeout(y),e=t.useXDR&&void 0===l.status?200:1223===l.status?204:l.status;var r=f,o=null;return 0!==e?(r={body:n(),statusCode:e,method:b,headers:{},url:v,rawRequest:l},l.getAllResponseHeaders&&(r.headers=p(l.getAllResponseHeaders()))):o=new Error("Internal XMLHttpRequest Error"),c(o,r,r.body)}}if("undefined"==typeof t.callback)throw new Error("callback argument missing");var u=!1,c=function(e,n,r){u||(u=!0,t.callback(e,n,r))},f={body:void 0,headers:{},statusCode:0,method:b,url:v,rawRequest:l},l=t.xhr||null;l||(l=t.cors||t.useXDR?new s.XDomainRequest:new s.XMLHttpRequest);var d,h,y,v=l.url=t.uri||t.url,b=l.method=t.method||"GET",m=t.body||t.data||null,w=l.headers=t.headers||{},g=!!t.sync,x=!1;if(t.json===!0&&(x=!0,w.accept||w.Accept||(w.Accept="application/json"),"GET"!==b&&"HEAD"!==b&&(w["content-type"]||w["Content-Type"]||(w["Content-Type"]="application/json"),m=JSON.stringify(t.body))),l.onreadystatechange=e,l.onload=i,l.onerror=r,l.onprogress=function(){},l.ontimeout=r,l.open(b,v,!g,t.username,t.password),g||(l.withCredentials=!!t.withCredentials),!g&&t.timeout>0&&(y=setTimeout(function(){h=!0,l.abort("timeout");var t=new Error("XMLHttpRequest timeout");t.code="ETIMEDOUT",r(t)},t.timeout)),l.setRequestHeader)for(d in w)w.hasOwnProperty(d)&&l.setRequestHeader(d,w[d]);else if(t.headers&&!o(t.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in t&&(l.responseType=t.responseType),"beforeSend"in t&&"function"==typeof t.beforeSend&&t.beforeSend(l),l.send(m),l}function a(t){if("document"===t.responseType)return t.responseXML;var e=204===t.status&&t.responseXML&&"parsererror"===t.responseXML.documentElement.nodeName;return""!==t.responseType||e?null:t.responseXML}function c(){}var f=t("global/window"),l=t("is-function"),p=t("parse-headers"),d=t("xtend");e.exports=s,s.XMLHttpRequest=f.XMLHttpRequest||c,s.XDomainRequest="withCredentials"in new s.XMLHttpRequest?s.XMLHttpRequest:f.XDomainRequest,r(["get","put","post","patch","head","delete"],function(t){s["delete"===t?"del":t]=function(e,n,r){return n=i(e,n,r),n.method=t.toUpperCase(),u(n)}})},{"global/window":20,"is-function":21,"parse-headers":23,xtend:25}],17:[function(t,e,n){e.exports=t("@bjoerge/xhr")},{"@bjoerge/xhr":16}],18:[function(t,e,n){"use strict";function r(t){if(null===t||void 0===t)throw new TypeError("Sources cannot be null or undefined");return Object(t)}function o(t,e,n){var r=e[n];if(void 0!==r&&null!==r){if(u.call(t,n)&&(void 0===t[n]||null===t[n]))throw new TypeError("Cannot convert undefined or null to object ("+n+")");u.call(t,n)&&s(r)?t[n]=i(Object(t[n]),e[n]):t[n]=r}}function i(t,e){if(t===e)return t;e=Object(e);for(var n in e)u.call(e,n)&&o(t,e,n);if(Object.getOwnPropertySymbols)for(var r=Object.getOwnPropertySymbols(e),i=0;i<r.length;i++)a.call(e,r[i])&&o(t,e,r[i]);return t}var s=t("is-obj"),u=Object.prototype.hasOwnProperty,a=Object.prototype.propertyIsEnumerable;e.exports=function(t){t=r(t);for(var e=1;e<arguments.length;e++)i(t,arguments[e]);return t}},{"is-obj":22}],19:[function(t,e,n){function r(t,e,n){if(!u(e))throw new TypeError("iterator must be a function");arguments.length<3&&(n=this),"[object Array]"===a.call(t)?o(t,e,n):"string"==typeof t?i(t,e,n):s(t,e,n)}function o(t,e,n){for(var r=0,o=t.length;r<o;r++)c.call(t,r)&&e.call(n,t[r],r,t)}function i(t,e,n){for(var r=0,o=t.length;r<o;r++)e.call(n,t.charAt(r),r,t)}function s(t,e,n){for(var r in t)c.call(t,r)&&e.call(n,t[r],r,t)}var u=t("is-function");e.exports=r;var a=Object.prototype.toString,c=Object.prototype.hasOwnProperty},{"is-function":21}],20:[function(t,e,n){(function(t){"undefined"!=typeof window?e.exports=window:"undefined"!=typeof t?e.exports=t:"undefined"!=typeof self?e.exports=self:e.exports={}}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}],21:[function(t,e,n){function r(t){var e=o.call(t);return"[object Function]"===e||"function"==typeof t&&"[object RegExp]"!==e||"undefined"!=typeof window&&(t===window.setTimeout||t===window.alert||t===window.confirm||t===window.prompt)}e.exports=r;var o=Object.prototype.toString},{}],22:[function(t,e,n){"use strict";e.exports=function(t){var e=typeof t;return null!==t&&("object"===e||"function"===e)}},{}],23:[function(t,e,n){var r=t("trim"),o=t("for-each"),i=function(t){return"[object Array]"===Object.prototype.toString.call(t)};e.exports=function(t){if(!t)return{};var e={};return o(r(t).split("\n"),function(t){var n=t.indexOf(":"),o=r(t.slice(0,n)).toLowerCase(),s=r(t.slice(n+1));"undefined"==typeof e[o]?e[o]=s:i(e[o])?e[o].push(s):e[o]=[e[o],s]}),e}},{"for-each":19,trim:24}],24:[function(t,e,n){function r(t){return t.replace(/^\s*|\s*$/g,"")}n=e.exports=r,n.left=function(t){return t.replace(/^\s*/,"")},n.right=function(t){return t.replace(/\s*$/,"")}},{}],25:[function(t,e,n){function r(){for(var t={},e=0;e<arguments.length;e++){var n=arguments[e];for(var r in n)o.call(n,r)&&(t[r]=n[r])}return t}e.exports=r;var o=Object.prototype.hasOwnProperty},{}],26:[function(t,e,n){function r(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)o.call(n,r)&&(t[r]=n[r])}return t}e.exports=r;var o=Object.prototype.hasOwnProperty},{}],27:[function(t,e,n){e.exports=t("./zen-observable.js").Observable},{"./zen-observable.js":28}],28:[function(t,e,n){"use strict";!function(t,r){"undefined"!=typeof n?t(n,e):"undefined"!=typeof self&&t("*"===r?self:r?self[r]={}:{})}(function(t,e){function n(t){return"function"==typeof Symbol&&Boolean(Symbol[t])}function r(t){return n(t)?Symbol[t]:"@@"+t}function o(t,e){var n=t[e];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function i(t){var e=r("species");return e?t[e]:t}function s(t,e){Object.keys(e).forEach(function(n){var r=Object.getOwnPropertyDescriptor(e,n);r.enumerable=!1,Object.defineProperty(t,n,r)})}function u(t){var e=t._cleanup;e&&(t._cleanup=void 0,e())}function a(t){return void 0===t._observer}function c(t){a(t)||(t._observer=void 0,u(t))}function f(t){return function(e){t.unsubscribe()}}function l(t,e){if(Object(t)!==t)throw new TypeError("Observer must be an object");this._cleanup=void 0,this._observer=t;var n=o(t,"start");if(n&&n.call(t,this),!a(this)){t=new p(this);try{var r=e.call(void 0,t);if(null!=r){if("function"==typeof r.unsubscribe)r=f(r);else if("function"!=typeof r)throw new TypeError(r+" is not a function");this._cleanup=r}}catch(e){return void t.error(e)}a(this)&&u(this)}}function p(t){this._subscription=t}function d(t){if("function"!=typeof t)throw new TypeError("Observable initializer must be a function");this._subscriber=t}s(l.prototype={},{get closed(){return a(this)},unsubscribe:function(){c(this)}}),s(p.prototype={},{get closed(){return a(this._subscription)},next:function(t){var e=this._subscription;if(!a(e)){var n=e._observer;try{var r=o(n,"next");if(!r)return;return r.call(n,t)}catch(t){try{c(e)}finally{throw t}}}},error:function(t){var e=this._subscription;if(a(e))throw t;var n=e._observer;e._observer=void 0;try{var r=o(n,"error");if(!r)throw t;t=r.call(n,t)}catch(t){try{u(e)}finally{throw t}}return u(e),t},complete:function(t){var e=this._subscription;if(!a(e)){var n=e._observer;e._observer=void 0;try{var r=o(n,"complete");t=r?r.call(n,t):void 0}catch(t){try{u(e)}finally{throw t}}return u(e),t}}}),s(d.prototype,{subscribe:function(t){for(var e=[],n=1;n<arguments.length;++n)e.push(arguments[n]);return"function"==typeof t&&(t={next:t,error:e[0],complete:e[1]}),new l(t,this._subscriber)},forEach:function(t){var e=this;return new Promise(function(n,r){return"function"!=typeof t?Promise.reject(new TypeError(t+" is not a function")):void e.subscribe({_subscription:null,start:function(t){if(Object(t)!==t)throw new TypeError(t+" is not an object");this._subscription=t},next:function(e){var n=this._subscription;if(!n.closed)try{return t(e)}catch(t){r(t),n.unsubscribe()}},error:r,complete:n})})},map:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");var n=i(this.constructor);return new n(function(n){return e.subscribe({next:function(e){if(!n.closed){try{e=t(e)}catch(t){return n.error(t)}return n.next(e)}},error:function(t){return n.error(t)},complete:function(t){return n.complete(t)}})})},filter:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");var n=i(this.constructor);return new n(function(n){return e.subscribe({next:function(e){if(!n.closed){try{if(!t(e))return}catch(t){return n.error(t)}return n.next(e)}},error:function(t){return n.error(t)},complete:function(){return n.complete()}})})},reduce:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");var n=i(this.constructor),r=arguments.length>1,o=!1,s=arguments[1],u=s;return new n(function(n){return e.subscribe({next:function(e){if(!n.closed){var i=!o;if(o=!0,!i||r)try{u=t(u,e)}catch(t){return n.error(t)}else u=e}},error:function(t){return n.error(t)},complete:function(){return o||r?(n.next(u),void n.complete()):void n.error(new TypeError("Cannot reduce an empty sequence"))}})})},flatMap:function(t){var e=this;if("function"!=typeof t)throw new TypeError(t+" is not a function");var n=i(this.constructor);return new n(function(n){function r(){o&&0===i.length&&n.complete()}var o=!1,i=[],s=e.subscribe({next:function(e){if(t)try{e=t(e)}catch(t){return void n.error(t)}d.from(e).subscribe({_subscription:null,start:function(t){i.push(this._subscription=t)},next:function(t){n.next(t)},error:function(t){n.error(t)},complete:function(){var t=i.indexOf(this._subscription);t>=0&&i.splice(t,1),r()}})},error:function(t){return n.error(t)},complete:function(){o=!0,r()}});return function(t){i.forEach(function(t){return t.unsubscribe()}),s.unsubscribe()}})}}),Object.defineProperty(d.prototype,r("observable"),{value:function(){return this},writable:!0,configurable:!0}),s(d,{from:function(t){var e="function"==typeof this?this:d;if(null==t)throw new TypeError(t+" is not an object");var i=o(t,r("observable"));if(i){var s=i.call(t);if(Object(s)!==s)throw new TypeError(s+" is not an object");return s.constructor===e?s:new e(function(t){return s.subscribe(t)})}if(n("iterator")&&(i=o(t,r("iterator"))))return new e(function(e){for(var n,r=i.call(t)[Symbol.iterator]();n=r.next(),!n.done;){var o=n.value;if(e.next(o),e.closed)return}e.complete()});if(Array.isArray(t))return new e(function(e){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()});throw new TypeError(t+" is not observable")},of:function(){for(var t=[],e=0;e<arguments.length;++e)t.push(arguments[e]);var n="function"==typeof this?this:d;return new n(function(e){for(var n=0;n<t.length;++n)if(e.next(t[n]),e.closed)return;e.complete()})}}),Object.defineProperty(d,r("species"),{get:function(){return this},configurable:!0}),t.Observable=d},"*")},{}]},{},[13])(13)});
