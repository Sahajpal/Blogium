{"version":3,"sources":["../../src/scripts/print-bundle-size.js"],"names":["umdPath","join","__dirname","bundlePath","minPath","readFile","bundleErr","bundle","throwOnError","minErr","minBundle","gzipErr","gzipedSize","output","size","length","console","log","padding","borderColor","align","err","code","Error","bytes","color"],"mappings":";;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;AACA;;;;;;AANA;AAQA,IAAMA,UAAU,eAAKC,IAAL,CAAUC,SAAV,EAAqB,IAArB,EAA2B,IAA3B,EAAiC,KAAjC,CAAhB;AACA,IAAMC,aAAa,eAAKF,IAAL,CAAUD,OAAV,EAAmB,iBAAnB,CAAnB;AACA,IAAMI,UAAU,eAAKH,IAAL,CAAUD,OAAV,EAAmB,qBAAnB,CAAhB;;AAEA,aAAGK,QAAH,CAAYF,UAAZ,EAAwB,UAACG,SAAD,EAAYC,MAAZ,EAAuB;AAC7CC,eAAaF,SAAb;;AAEA,eAAGD,QAAH,CAAYD,OAAZ,EAAqB,UAACK,MAAD,EAASC,SAAT,EAAuB;AAC1CF,iBAAaC,MAAb;;AAEA,4BAASF,MAAT,EAAiB,UAACI,OAAD,EAAUC,UAAV,EAAyB;AACxCJ,mBAAaG,OAAb;;AAEA,UAAME,SAAS,CACb,kBADa,EAEb,kBAFa,iBAGAC,KAAKP,OAAOQ,MAAZ,CAHA,wBAIOD,KAAKF,UAAL,CAJP,EAKbX,IALa,CAKR,IALQ,CAAf;;AAOAe,cAAQC,GAAR,CAAY,qBAAMJ,MAAN,EAAc;AACxBK,iBAAS,CADe;AAExBC,qBAAa,QAFW;AAGxBC,eAAO;AAHiB,OAAd,CAAZ;AAKD,KAfD;AAgBD,GAnBD;AAoBD,CAvBD;;AAyBA,SAASZ,YAAT,CAAsBa,GAAtB,EAA2B;AACzB,MAAIA,OAAOA,IAAIC,IAAJ,KAAa,QAAxB,EAAkC;AAChC,UAAM,IAAIC,KAAJ,CAAU,oDAAV,CAAN;AACD,GAFD,MAEO,IAAIF,GAAJ,EAAS;AACd,UAAMA,GAAN;AACD;AACF;;AAED,SAASP,IAAT,CAAcU,KAAd,EAAqB;AACnB,MAAMC,QAAQD,QAAQ,OAAO,EAAf,GAAoB,KAApB,GAA4B,OAA1C;AACA,SAAO,gBAAMC,KAAN,EAAa,2BAAYD,KAAZ,CAAb,CAAP;AACD","file":"print-bundle-size.js","sourcesContent":["/* eslint-disable no-console */\nimport fs from 'fs'\nimport path from 'path'\nimport boxen from 'boxen'\nimport chalk from 'chalk'\nimport gzipSize from 'gzip-size'\nimport prettyBytes from 'pretty-bytes'\n\nconst umdPath = path.join(__dirname, '..', '..', 'umd')\nconst bundlePath = path.join(umdPath, 'sanityClient.js')\nconst minPath = path.join(umdPath, 'sanityClient.min.js')\n\nfs.readFile(bundlePath, (bundleErr, bundle) => {\n  throwOnError(bundleErr)\n\n  fs.readFile(minPath, (minErr, minBundle) => {\n    throwOnError(minErr)\n\n    gzipSize(bundle, (gzipErr, gzipedSize) => {\n      throwOnError(gzipErr)\n\n      const output = [\n        'UMD bundle size:',\n        '────────────────',\n        `Minified: ${size(bundle.length)}`,\n        `Minified + gzip: ${size(gzipedSize)}`\n      ].join('\\n')\n\n      console.log(boxen(output, {\n        padding: 1,\n        borderColor: 'yellow',\n        align: 'right'\n      }))\n    })\n  })\n})\n\nfunction throwOnError(err) {\n  if (err && err.code === 'ENOENT') {\n    throw new Error('File not found, did you run `npm run build` first?')\n  } else if (err) {\n    throw err\n  }\n}\n\nfunction size(bytes) {\n  const color = bytes > 1024 * 50 ? 'red' : 'green'\n  return chalk[color](prettyBytes(bytes))\n}\n"]}