'use strict';

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = timer;

var _SanityStoreObservable = require('./SanityStoreObservable');

var _SanityStoreObservable2 = _interopRequireDefault(_SanityStoreObservable);

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }

function timer(initialDelay, period) {
  return new _SanityStoreObservable2.default(function (observer) {
    var n = 0;
    var intervalId = -1;

    var timeoutId = setTimeout(function () {
      next();
      if (period !== undefined) {
        intervalId = setInterval(next, interval);
      }
    }, initialDelay);

    function next() {
      observer.next(n++);
    }
    return function dispose() {
      clearTimeout(timeoutId);
      clearInterval(intervalId);
    };
  });
}