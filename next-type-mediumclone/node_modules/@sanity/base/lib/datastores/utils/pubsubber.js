"use strict";

Object.defineProperty(exports, "__esModule", {
  value: true
});
exports.default = pubsubber;
function pubsubber() {
  var subscribers = [];
  return {
    subscribe: subscribe,
    once: once,
    publish: publish
  };
  function subscribe(subscriber) {
    subscribers.push(subscriber);
    return unsubscribe.bind(null, subscriber);
  }
  function once(subscriber) {
    var unsub = subscribe(function () {
      subscriber.apply(undefined, arguments);
      unsub();
    });
    return unsub;
  }
  function publish() {
    for (var _len = arguments.length, args = Array(_len), _key = 0; _key < _len; _key++) {
      args[_key] = arguments[_key];
    }

    subscribers.forEach(function (subscriber) {
      return subscriber.apply(undefined, args);
    });
  }
  function unsubscribe(fn) {
    var idx = subscribers.indexOf(fn);
    if (idx) {
      subscribers.splice(idx, 1);
    }
  }
}